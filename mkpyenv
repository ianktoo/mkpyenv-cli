#!/bin/bash
# Terminal Guardian: Elite DevOps Specialist Script - DEPRECATED VERSION ENFORCER

# --- SECURITY & ERROR HANDLING ---
set -e

# --- VERSION CONTROL CONFIGURATION ---
# Define the version of this deprecated script.
CURRENT_SCRIPT_VERSION="1.0.0"
# Define the minimum version required to run (the version of the fixed script).
REQUIRED_VERSION="2.0.0" 
# Define the raw GitHub URL for the fixed script.
RAW_SCRIPT_URL="https://raw.githubusercontent.com/ianktoo/mkpyenv-cli/main/mkpyenv"
# -------------------------------------

# --- MANDATORY UPDATE CHECK ---
if [[ "$CURRENT_SCRIPT_VERSION" < "$REQUIRED_VERSION" ]]; then
    # Print stern warning and update instructions to the user's terminal
    echo "=========================================================="
    echo "ðŸš¨ URGENT: mkpyenv Script Update Required! ðŸš¨"
    echo "Your current version (v$CURRENT_SCRIPT_VERSION) is deprecated and contains bugs (e.g., failed --help support)."
    echo "Execution aborted to ensure system integrity."
    echo ""
    echo "ðŸ‘‰ ACTION REQUIRED: Update to v$REQUIRED_VERSION immediately by running:"
    echo ""
    # The $(which mkpyenv) command finds the exact location of the script in the user's PATH
    echo "    curl -sL $RAW_SCRIPT_URL -o \"\$(which mkpyenv)\" && chmod +x \"\$(which mkpyenv)\""
    echo ""
    echo "=========================================================="
    exit 1 # Exit with non-zero status to indicate failure/interruption
fi

# -------------------------------
# The original, buggy script logic should be placed HERE if you want it to run 
# if the user manually changes their CURRENT_SCRIPT_VERSION (NOT RECOMMENDED).
# Since you want to force the fix, we omit the old code here.
# -------------------------------
